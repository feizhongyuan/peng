<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<head>
	<meta name="format-detection" content="telephone=yes"/>
	<meta name="viewport"
		content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />

	<!--必需的js库,在正式使用时，建议放在服务器上-->
	<script src="https://unpkg.com/dsbridge@3.1.3/dist/dsbridge.js"></script>
	<style>
		input {
			margin: 10px;
		}

		h3,
		h6 {
			text-align: center;
		}

		.message {
			font-size: 12px;
			color: darkgreen;
		}

		img {
			width: 100%;
		}
	</style>
	<script type="text/javascript">
		function myfunction() {

		}

		function getImage() {

		}

		//验证上传图片是否可用
		function loadImage() {
			var f = document.querySelector("input[name='file_input']").files;

			for (var i = 0; i < f.length; i++) {
				// console.log(f[i].name + ' , ' + f[i].size + 'byte');
				alert('name=' + f[i].name + '\nsize=' + parseInt(f[i].size / 1024) + 'kb');

				var node;
				if (f[i].type.indexOf("image") != -1) {
					node = document.createElement('img');
					var aa = window.URL.createObjectURL(f[i]);
					console.log(aa);
					node.src = aa;
				} else if (f[i].type.indexOf("text") != -1) {
					node = document.createElement('textarea');
					var reader = new FileReader();
					reader.readAsText(f[i], 'utf-8');
					reader.onload = function (e) {
						var text = e.target.result;
						node.innerHTML=text;
					}
				} else {
					
				}

				document.body.appendChild(node);
			}
		}

		//打开腾讯x5内核测试页面
		function x5Test() {
			//显示000000表示加载的是系统内核，显示大于零的数字表示加载了x5内核（该数字是x5内核版本号）
			dsBridge.call("openWebView", "http://soft.imtt.qq.com/browser/tes/feedback.html");
		}

		//打开指定url的网页
		function openWebView() {
			dsBridge.call("openWebView", "https://m.v.qq.com/index.html");
		}


		//拨打电话
		function dial() {
			dsBridge.call("dial", "188888888");
		}

		//无参同步调用示例
		function clickTest1() {
			var b = dsBridge.call("clickTest1", "");
			alert("clickTest1 收到返回值：" + b)
		}
		//有参同步调用示例
		function clickTest2() {
			var b = dsBridge.call("clickTest2", "123");
			alert("clickTest2 收到返回值：" + b)
		}
		//有参异步调用示例
		function clickTest3() {
			dsBridge.call("clickTest3", "123", function (result) {
				alert("clickTest3 收到返回值：" + result);
			});
		}

		//===================被原生调用的方法示例======================
		function jsTestFunct(value) {
			alert("被原生调用:" + value);
		}

		window.onload = function () {
			var ua = navigator.userAgent;
			var userAgentNood = document.querySelector("#userAgent");
			userAgentNood.innerHTML = ua;

		}

	</script>
</head>

<body>

	<h3>Java-Javascript Interaction In Android</h3>
	<h6>dsbridge 示例</h6>

	<h6 id="userAgent"></h6>

	<div class="none">

		<fieldset>
			<legend>js调用原生</legend>
			<input type="button" value="无参同步调用示例" onclick="clickTest1()" />
			<input type="button" value="有参同步调用示例" onclick="clickTest2()" />
			<input type="button" value="有参异步调用示例" onclick="clickTest3()" />
		</fieldset>

		<a href="tel:10086">拨打电话到 10086</a>
		<input type="file" value="获取文件" name="file_input" onchange="javascript:loadImage();">
		<input type="button" name="subbtn" value="打开指定网页" onclick="javascript:openWebView();" />

	</div>

</body>

</html>